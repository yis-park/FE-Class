<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>클로저 closure1</title>
    <style>
      .box {
        margin-top: 20px;
        width: 200px;
        height: 200px;
        background-color: orange;
      }
    </style>
  </head>
  <body>
    <button>click</button>
    <div class="box" id="box">
      중첩으로 함수 작성할시 처음변수를 두번째가 사용하지 않으면 클로저가 아님.
      처음 변수를 두번째가 받아서 사용하면 그게 클로저
    </div>
    <script>
      const btn = document.querySelector("button");
      const box = document.querySelector("#box");

      const toggle = (function () {
        let state = false; // 내부 함수가 이 변수를 사용하게 됨. 클로저가 사용하는 변수가 됨

        // 클로저 반환한 것임
        return function () {
          // 즉시실행함수가 반환한 함수는 렉시컬 환경에 속한 변수 state를 기억하는 클로저
          box.style.display = state ? "block" : "none"; //block보임 none 안보임
          state = !state; // false->true 대입, true->false 대입
        };
      })();

      // btn.onclick = toggle;
      btn.addEventListener("click", toggle);
      // console.log(state); 함수 내부의 변수에 접근할 수 없음
    </script>
  </body>
</html>
